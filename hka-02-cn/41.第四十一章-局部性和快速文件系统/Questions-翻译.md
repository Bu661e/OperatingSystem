作业（模拟）

本节介绍 ffs.py，这是一个简单的 FFS 模拟器，可用于更好地了解基于 FFS 的文件
和目录分配的工作方式。有关如何运行模拟器的详细信息，请参见 README。 

问题

<br/>
<br/>

1.检查 in.largefile 文件，然后使用 -f in.largefile 和 -L 4 标志运行模拟器。
后者将 large-file exception 设置为 4 个块。 产生的分配将是什么样的？ 使用 -c 运行以进行检查。 


<br/>
<br/>

2.现在以-L 30 运行。您期望看到什么？ 再次打开 -c 来查看您是否正确。 您也可以使用 -S 来确切查看哪些块分配给了文件 /a。 


<br/>
<br/>

3.现在，我们将计算有关文件的一些统计信息。 第一个是我们称为 filepan 的东西，
它是文件的任何两个数据块之间或 inode 与任何数据块之间的最大距离。 计算 /a 的文件跨度。 
运行 ffs.py -f in.largefile -L 4 -T -c 来查看它是什么。添加 -L 100 参数进行相同操作。
随着 large-file exception 参数从低值变为高值，filespan 有什么不同？ 

<br/>
<br/>

4.现在，我们来看一个新的输入文件 in.manyfiles。 您认为 FFS 策略如何将这些文件跨组放置？ 
（您可以使用 -v 运行，以查看创建了哪些文件和目录，或者 cat in.manyfiles）。 
使用 -c 运行模拟器，看看你的猜测是否正确。 

<br/>
<br/>

5.评估 FFS 的度量标准称为 dirspan。这个标准计算特定目录中文件的分布，
特别是目录中所有文件的 inodes 和数据块之间的最大距离与目录本身的 inodes 和数据块之间的最大距离。 
使用 in.manyfiles 和 -T 标志运行，并计算三个目录的 dirspan。 使用 -c 运行以进行检查。 FFS 在最小化 dirspan 方面做得如何？ 

<br/>
<br/>

6.现在，将每组的 inode table 的大小更改为 5（-I 5）。 您如何看待这将改变文件的布局？
用 -c 运行，看是否正确。 它如何影响 dirspan？ 

<br/>
<br/>

7.FFS 应将新目录的 inode 放在哪个组中？ 默认（模拟器）策略将查找具有最多空闲 inodes 的组。 
另一种策略是寻找一组具有最多空闲索 inodes 的组。 例如，如果使用 -A 2 运行，则在分配新目录时，模拟器将成对查看组，并为分配选择最佳对。
使用 .manyfiles -I 5 -A 2 -c 运行./ffs.py -f，以查看此策略如何改变分配。 
它如何影响 dirspan？ 为什么这种策略会很好？ 

<br/>
<br/>

8.我们将探讨的最后一项策略有关于文件碎片。 使用 .fragmented -v 运行 ./ffs.py -f，
看看是否可以预测剩余文件的分配方式。使用 -c 来查看答案。 文件 /i 的数据布局有什么有趣的地方？ 
为什么有问题？ 

<br/>
<br/>

9.一种称为连续分配（-C）的新策略，试图确保每个文件都连续分配。 具体来说，使用 -C n，
文件系统将尝试确保在分配一个块之前，组中 n 个连续的块是空闲的。 
使用 fragmented-v -C 2 -c 运行 ./ffs.py -f 来查看区别。 
随着传递给 -C 的参数增加，布局如何变化？ 最后，-C 如何影响 filespan 和 dirspan？