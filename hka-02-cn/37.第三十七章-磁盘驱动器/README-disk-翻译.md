该作业使用 disk.py 使您熟悉现代磁盘驱动器的工作方式。 
它具有许多不同的选项，并且与大多数其他模拟器不同，
它具有图形动画，以向您确切显示磁盘运行时会发生什么。

[注意：作业还包含一个实验性程序“disk-precise.py”。 
此版本的模拟器使用 python Decimal 包进行精确的浮点计算，
因此在某些特殊情况下比“disk.py”提供更好的答案。但是，它尚未经过非常仔细的测试，因此请谨慎使用]

首先让我们看一个简单的例子。要运行模拟器并计算一些基本的寻道，旋转和传输时间，您首先必须提供对模拟器的请求列表。
可以通过指定确切的请求或通过模拟器随机生成一些请求来完成。

我们首先指定一些请求列表。 让我们先开始一个单一请求：

```shell script
prompt> disk.py -a 10
```

**译者注：如果你看到以下错误提醒： please install the python-tk package**
**需要先安装 python-tk 模块，ubuntu 可以直接输入 apt install python-tk 进行安装**

你会看到下面的输出:

<pre>
REQUESTS [br '10']

For the requests above, compute the seek, rotate, and transfer times.
Use -c or the graphical mode (-G) to see the answers.
</pre>

为了能够计算该请求的查找，旋转和传输时间，您必须了解扇区布局，磁盘头的起始位置等的更多信息。 
要查看许多此类信息，请以图形方式（-G）运行模拟器：

```shell script
prompt> disk.py -a 10 -G
```

此时将出现一个窗口，上面有简单磁盘。 磁盘头位于外部磁道的扇区 6 上。
如您所见，扇区 10（我们的示例扇区）位于同一磁道上，距离大约是磁道的三分之一。
旋转方向为逆时针方向。在窗口上按 s 键运行模拟器

模拟器运行完成后，您应该能够看到，为了访问扇区 10，磁盘花费了 105 个单位时间用于旋转， 
30 个单位时间用于传输，寻道时间为 0。 按 “q“ 关闭模拟器窗口。

要计算这些值（而不是仅运行模拟），您需要了解有关磁盘的一些详细信息。 
首先，转速默认设置为每单位时间旋转 1 度。 因此，完整旋转一圈需要 360 个单位时间。
其次，传输在扇区之间的中点开始和结束。 因此，要读取扇区 10，从 9 到 10 之间中点开始读取，
到 10 与 11 之间中点结束。最后，在默认磁盘中，每个磁道有 12 个扇区，这意味着每个扇区占用 30 度的旋转空间 。 
因此，要读取一个扇区，它需要 30 个时间单位（根据我们默认的旋转速度）。

有了这些信息，您现在应该能够计算出访问扇区 10 的寻道时间，旋转和传输时间。
因为磁头从与 10 相同的磁道开始，所以没有寻道时间。 由于磁盘以 1 度/时间单位旋转，
因此需要 105 个时间单位才能到达扇区 10 的开始，介于 9 与 10 之间（请注意，它与第 9 区的中间正好 90 度，与中点又有 15 度）。 
最后得出，读取一个扇区的数据需要 30 个时间单位。

**译者注：读取数据的时间是包括在目标扇区间旋转的时间的**

现在让我们看一个稍微复杂的例子：

```shell script
prompt> disk.py -a 10,11 -G
```

在这种情况下，我们要读取两个扇区数据，即 10 和 11。需要多长时间？在运行模拟之前尝试猜测！

您可能猜到了，此模拟仅多花费 30 个单位时间来传输下一个扇区 11。
因此，搜索和旋转时间保持不变，但是请求的传输时间却增加了一倍。
实际上，您可以在模拟器窗口的顶部看到这些总和。 它们还可以打印到控制台，如下所示：

<pre>
...
Sector:  10  Seek:  0  Rotate:105  Transfer: 30  Total: 135
Sector:  11  Seek:  0  Rotate:  0  Transfer: 30  Total:  30
TOTALS      Seek:  0  Rotate:105  Transfer: 60  Total: 165
</pre>

现在，让我们用一个寻道示例。 尝试以下请求：

<pre>
prompt> disk.py -a 10,18 -G
</pre>

要计算这将花费多长时间，您需要知道寻道将花费多长时间。 
默认情况下，每条轨道之间的距离为 40 个距离单位，默认搜索速度为每单位时间移动 1 个距离单位。 
因此，从外磁道到中间磁道的搜寻需要 40 个时间单位。

您还必须了解调度策略。默认调度策略为 FIFO.
因此，现在您可以假设请求处理顺序可以通过 "-a" 标志指定，以此来计算请求时间。

要计算磁盘处理这些请求所需的时间，我们首先计算访问扇区 10 所需的时间，
我们可以知道这是 135 个时间单位（105 个旋转单位，30 个传输单位）。 
完成此请求后，磁盘开始寻找扇区 18 所在的中间磁道，耗时 40 个 时间单位。 
然后，磁盘旋转到扇区 18，并以 30 个时间单位传输它，从而完成了模拟。 但是最后一次旋转需要多长时间？

要计算 18 的旋转延迟，首先要计算出磁盘从结束访问第 10 扇区到开始访问第 18 扇区所需要的时间，
假设进行零成本寻道。从模拟器上可以看到，外侧轨道上的第 10 扇区与中间轨道上的第 22 扇区对齐，
有 7 个扇区将 22 和 18 分开(23、12、13、14、15、16 和 17，当圆盘逆时针旋转时)。
旋转 7 个扇区需要 210 个时间单位(每个扇区 30 个时间单位)。
然而，这个旋转的第一部分实际上是花了 40 个时间单位去寻找中间的轨道。
因此，进入第 18 扇区的实际旋转延迟是 210 减 40，即 170 个时间单位。运行模拟器自己看看;
注意，您可以在没有图形的情况下运行，并使用“-c”标志来只查看结果而不查看图形。

<pre>
prompt> ./disk.py -a 10,18 -c
...
Sector:  10  Seek:  0  Rotate:105  Transfer: 30  Total: 135
Sector:  18  Seek: 40  Rotate:170  Transfer: 30  Total: 240
TOTALS      Seek: 40  Rotate:275  Transfer: 60  Total: 375
</pre>

您现在应该对模拟器的工作原理有一个基本的了解。 课后作业的问题将探讨一些不同的选项，以更好地帮助您建立磁盘实际工作方式的模型。
